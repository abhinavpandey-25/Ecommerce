{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { parseCookies } from 'nookies';\nimport baseURL from '../helper/baseURL';\n\nfunction UserRoles() {\n  const {\n    token\n  } = parseCookies();\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  useEffect(() => {\n    fetchUser();\n  }, []);\n\n  const fetchUser = async () => {\n    const res = await fetch(`${baseURL}/api/users`, {\n      headers: {\n        \"Authorization\": token\n      }\n    });\n    const res2 = await res.json();\n    console.log(res2);\n    setUser(res2);\n  };\n\n  const handleRole = async (id, role) => {\n    const res = await fetch(`${baseURL}/api/users`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      },\n      body: JSON.stringify({\n        _id: id,\n        role: role\n      })\n    });\n    const res2 = await res.json();\n    console.log(res2); //map function returns an array\n\n    const updatedUser = user.map(person => {\n      if (res2._id == person._id) {\n        return res2;\n      } else {\n        return person;\n      }\n    });\n    setUser(updatedUser);\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsxs(\"table\", {\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            children: \"Name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Email\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Role\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: user.map(item => {\n          return (\n            /*#__PURE__*/\n            //alt+shift+downkey is used to copy the current line to the next line\n            _jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsx(\"td\", {\n                children: item.name\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: item.email\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [item.role, /*#__PURE__*/_jsx(\"button\", {\n                  className: \"btn danger\",\n                  style: {\n                    marginLeft: \"20px\"\n                  },\n                  onClick: () => handleRole(item._id, item.role),\n                  children: \"Toggle role\"\n                })]\n              })]\n            }, item._id)\n          );\n        })\n      })]\n    })\n  });\n}\n\nexport default UserRoles;","map":null,"metadata":{},"sourceType":"module"}