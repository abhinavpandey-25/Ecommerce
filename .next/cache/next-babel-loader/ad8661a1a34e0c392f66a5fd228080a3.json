{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\ECommerce\\\\mystore\\\\pages\\\\cart.js\";\nimport baseURL from '../helper/baseURL';\nimport { parseCookies } from 'nookies';\nimport cookie from 'js-cookie';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\n\nconst cart = ({\n  error\n}) => {\n  const {\n    token\n  } = parseCookies();\n\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-align\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please Login to view your cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 11,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 17\n    }, this);\n  }\n\n  const router = useRouter();\n\n  if (error) {\n    M.toast({\n      html: error,\n      classes: \"red\"\n    });\n    cookie.remove(\"user\");\n    cookie.remove(\"token\");\n    router.push('/login');\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"this is cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n};\n\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n\n  if (!token) {\n    return {\n      props: {\n        products: []\n      }\n    };\n  }\n\n  const res = await fetch(`${baseURL}/api/cart`, {\n    headers: {\n      \"Authorization\": token\n    }\n  });\n  const products = await res.json();\n  console.log(products.product + \"cart\");\n\n  if (products.error) {\n    return {\n      props: {\n        error: products.error\n      }\n    };\n  }\n\n  return {\n    props: {\n      products\n    }\n  };\n}\nexport default cart;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/ECommerce/mystore/pages/cart.js"],"names":["baseURL","parseCookies","cookie","useRouter","Link","cart","error","token","router","M","toast","html","classes","remove","push","getServerSideProps","ctx","props","products","res","fetch","headers","json","console","log","product"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,mBAApB;AACA,SAAQC,YAAR,QAA2B,SAA3B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AACA,MAAMC,IAAI,GAAC,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAW;AAClB,QAAM;AAACC,IAAAA;AAAD,MAAQN,YAAY,EAA1B;;AACA,MAAG,CAACM,KAAJ,EAAU;AACN,wBAAQ;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADI,eAEJ,QAAC,IAAD;AAAM,QAAA,IAAI,EAAC,QAAX;AAAA,+BAAoB;AAAQ,UAAA,SAAS,EAAC,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAApB;AAAA;AAAA;AAAA;AAAA,cAFI;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AAIH;;AACD,QAAMC,MAAM,GAACL,SAAS,EAAtB;;AACA,MAAGG,KAAH,EAAS;AACLG,IAAAA,CAAC,CAACC,KAAF,CAAQ;AAACC,MAAAA,IAAI,EAACL,KAAN;AAAYM,MAAAA,OAAO,EAAC;AAApB,KAAR;AACAV,IAAAA,MAAM,CAACW,MAAP,CAAc,MAAd;AACAX,IAAAA,MAAM,CAACW,MAAP,CAAc,OAAd;AACAL,IAAAA,MAAM,CAACM,IAAP,CAAY,QAAZ;AACH;;AACD,sBACI;AAAA,2BAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAF,mBADJ;AAGH,CAlBD;;AAmBA,OAAO,eAAeC,kBAAf,CAAkCC,GAAlC,EAAsC;AACzC,QAAK;AAACT,IAAAA;AAAD,MAAQN,YAAY,CAACe,GAAD,CAAzB;;AACA,MAAG,CAACT,KAAJ,EAAU;AACN,WAAO;AACHU,MAAAA,KAAK,EAAC;AAACC,QAAAA,QAAQ,EAAC;AAAV;AADH,KAAP;AAGH;;AACL,QAAMC,GAAG,GAAC,MAAMC,KAAK,CAAE,GAAEpB,OAAQ,WAAZ,EAAuB;AAC5CqB,IAAAA,OAAO,EAAC;AACJ,uBAAgBd;AADZ;AADoC,GAAvB,CAArB;AAKA,QAAMW,QAAQ,GAAC,MAAMC,GAAG,CAACG,IAAJ,EAArB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACO,OAAT,GAAiB,MAA7B;;AACA,MAAGP,QAAQ,CAACZ,KAAZ,EAAkB;AACd,WAAO;AACHW,MAAAA,KAAK,EAAC;AAACX,QAAAA,KAAK,EAACY,QAAQ,CAACZ;AAAhB;AADH,KAAP;AAGH;;AACD,SAAM;AACFW,IAAAA,KAAK,EAAC;AAACC,MAAAA;AAAD;AADJ,GAAN;AAGC;AACD,eAAeb,IAAf","sourcesContent":["import baseURL from '../helper/baseURL';\r\nimport {parseCookies} from 'nookies';\r\nimport cookie from 'js-cookie'\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link' ;\r\nconst cart=({error})=>{\r\n    const {token}=parseCookies()\r\n    if(!token){\r\n        return( <div className=\"center-align\">\r\n            <h3>Please Login to view your cart</h3>\r\n            <Link href='/login'><button className=\"btn\">Login</button></Link>\r\n        </div>)\r\n    }\r\n    const router=useRouter();\r\n    if(error){\r\n        M.toast({html:error,classes:\"red\"})\r\n        cookie.remove(\"user\");\r\n        cookie.remove(\"token\");\r\n        router.push('/login')\r\n    }\r\n    return (\r\n        <><h1>this is cart</h1></>\r\n    )       \r\n}\r\nexport async function getServerSideProps(ctx){\r\n    const{token}=parseCookies(ctx);\r\n    if(!token){\r\n        return {\r\n            props:{products:[]}\r\n        }\r\n    }\r\nconst res=await fetch(`${baseURL}/api/cart`,{\r\nheaders:{\r\n    \"Authorization\":token\r\n}\r\n})\r\nconst products=await res.json();\r\nconsole.log(products.product+\"cart\")\r\nif(products.error){\r\n    return {\r\n        props:{error:products.error}\r\n    }\r\n}\r\nreturn{\r\n    props:{products}\r\n}\r\n}\r\nexport default cart;"]},"metadata":{},"sourceType":"module"}