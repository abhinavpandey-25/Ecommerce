{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport baseUrl from '../helper/baseURL';\nimport { useRouter } from 'next/router';\n\nvar create = function create() {\n  var router = useRouter(); //this create page should be accesed by onlly the admin as user cannnort add the items in the website\n\n  var _useState = useState(\"\"),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      price = _useState2[0],\n      setPrice = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      media = _useState3[0],\n      setMedia = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var location, res, res2;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              console.log(\"submit\");\n              _context.next = 4;\n              return fileUpload();\n\n            case 4:\n              location = _context.sent;\n              _context.next = 7;\n              return fetch(\"\".concat(baseUrl, \"/api/products\"), {\n                method: \"POST\" //hame header bhi specify krna padega ki frontend se kis type ka data bheja jyga from the frontend\\\n                ,\n                headers: {\n                  'Content-Type': 'application/json' //server apne aap isko dekh k toh sari incoming request ko json m parse kr dega\n\n                },\n                //when sending the data to the server the data has to be a string\n                //whne receving data from a wev server the data is always a string then parse the data to become a js obj\n                body: JSON.stringify({\n                  name: name,\n                  price: price,\n                  media: location,\n                  //for storing image ham image phele upload krenge on cloudinary and then woh url save krenge and use access krenge\n                  description: description\n                })\n              });\n\n            case 7:\n              res = _context.sent;\n              _context.next = 10;\n              return res.json();\n\n            case 10:\n              res2 = _context.sent;\n\n              if (res2.error) {\n                M.toast({\n                  html: res2.error,\n                  classes: \"red\"\n                });\n              } else {\n                M.toast({\n                  html: \"Info saved successfully\",\n                  classes: \"green\"\n                });\n              }\n\n              router.push('/');\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fileUpload = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var formData, res, res2;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              formData = new FormData();\n              formData.append('file', media);\n              formData.append('upload_preset', 'mystore2');\n              formData.append('cloud_name', 'storagearea');\n              _context2.next = 6;\n              return fetch('https://api.cloudinary.com/v1_1/storagearea/image/upload', {\n                method: \"POST\",\n                body: formData\n              });\n\n            case 6:\n              res = _context2.sent;\n              _context2.next = 9;\n              return res.json();\n\n            case 9:\n              res2 = _context2.sent;\n              return _context2.abrupt(\"return\", res2.url);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function fileUpload() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"form\", {\n    className: \"container\",\n    onSubmit: function onSubmit(e) {\n      return handleSubmit(e);\n    },\n    children: [/*#__PURE__*/_jsx(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter Name\",\n      value: name,\n      onChange: function onChange(e) {\n        // console.log(e.target.value);    \n        setName(function () {\n          return e.target.value;\n        });\n      }\n    }), /*#__PURE__*/_jsx(\"input\", {\n      type: \"text\",\n      value: price,\n      placeholder: \"Enter Price\",\n      onChange: function onChange(e) {\n        setPrice(function () {\n          return e.target.value;\n        });\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"file-field input-field\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"btn\",\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          children: \"File\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"file\",\n          placeholder: \"Choose\",\n          onChange: function onChange(e) {\n            setMedia(function () {\n              return e.target.files[0];\n            });\n          }\n        })]\n      }), /*#__PURE__*/_jsx(\"img\", {\n        className: \"responsive-img \",\n        src: media ? URL.createObjectURL(media) : \"\"\n      })]\n    }), /*#__PURE__*/_jsx(\"textarea\", {\n      value: description,\n      placeholder: \"add some description\",\n      className: \"materialize-textarea\",\n      onChange: function onChange(e) {\n        return setDescription(function () {\n          return e.target.value;\n        });\n      }\n    }), /*#__PURE__*/_jsxs(\"button\", {\n      type: \"submit\",\n      className: \"waves-effect waves-light btn\",\n      children: [/*#__PURE__*/_jsx(\"i\", {\n        className: \"material-icons left\",\n        children: \"send\"\n      }), \"Submit\"]\n    })]\n  });\n}; //ctx me server se jo bhi a rha tha jese ham ne server se token and user in which i passed user role user email and user\n//user password  and ye data server p stringify m tha so we nned to parse the object to json\n\n\nexport var __N_SSP = true;\nexport default create;","map":null,"metadata":{},"sourceType":"module"}