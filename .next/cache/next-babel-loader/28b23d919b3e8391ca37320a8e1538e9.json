{"ast":null,"code":"import User from '../../models/User';\nimport Authenticated from '../../helper/Authenticated';\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      getUser(req, res);\n      break;\n\n    case \"PUT\":\n      updateRole(req, res);\n      break;\n  }\n});\nconst updateRole = Authenticated(async (req, res) => {\n  const id = req.body._id;\n  const role = req.body.role;\n  const newrole = role == \"user\" ? \"admin\" : \"user\";\n  const user = await User.findOneAndUpdate({\n    _id: id\n  }, {\n    role: newrole\n  }, {\n    new: true\n  });\n  res.status(200).json(user);\n});\nconst getUser = Authenticated(async (req, res) => {\n  const user = await User.find({\n    _id: {\n      $ne: req.userid\n    }\n  });\n  res.status(200).json(user);\n});","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/ECommerce/mystore/pages/api/users.js"],"names":["User","Authenticated","req","res","method","getUser","updateRole","id","body","_id","role","newrole","user","findOneAndUpdate","new","status","json","find","$ne","userid"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,mBAAjB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,gBAAe,OAAMC,GAAN,EAAUC,GAAV,KAAgB;AAC3B,UAAOD,GAAG,CAACE,MAAX;AACI,SAAK,KAAL;AAAWC,MAAAA,OAAO,CAACH,GAAD,EAAKC,GAAL,CAAP;AACC;;AACZ,SAAK,KAAL;AAAWG,MAAAA,UAAU,CAACJ,GAAD,EAAKC,GAAL,CAAV;AACC;AAJhB;AAMH,CAPD;AAQA,MAAMG,UAAU,GAACL,aAAa,CAAC,OAAMC,GAAN,EAAUC,GAAV,KAAgB;AACvC,QAAMI,EAAE,GAACL,GAAG,CAACM,IAAJ,CAASC,GAAlB;AACA,QAAMC,IAAI,GAACR,GAAG,CAACM,IAAJ,CAASE,IAApB;AACA,QAAMC,OAAO,GAACD,IAAI,IAAE,MAAN,GAAa,OAAb,GAAqB,MAAnC;AACJ,QAAME,IAAI,GAAC,MAAMZ,IAAI,CAACa,gBAAL,CACb;AAACJ,IAAAA,GAAG,EAACF;AAAL,GADa,EAEb;AAACG,IAAAA,IAAI,EAACC;AAAN,GAFa,EAGb;AAACG,IAAAA,GAAG,EAAC;AAAL,GAHa,CAAjB;AAKIX,EAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBJ,IAArB;AACP,CAV6B,CAA9B;AAWA,MAAMP,OAAO,GAACJ,aAAa,CAAC,OAAMC,GAAN,EAAUC,GAAV,KAAgB;AACxC,QAAMS,IAAI,GAAC,MAAMZ,IAAI,CAACiB,IAAL,CAAU;AAACR,IAAAA,GAAG,EAAC;AAACS,MAAAA,GAAG,EAAChB,GAAG,CAACiB;AAAT;AAAL,GAAV,CAAjB;AACAhB,EAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBJ,IAArB;AACH,CAH0B,CAA3B","sourcesContent":["import User from '../../models/User'\r\nimport Authenticated from '../../helper/Authenticated'\r\nexport default async(req,res)=>{\r\n    switch(req.method){\r\n        case \"GET\":getUser(req,res)\r\n                    break;\r\n        case \"PUT\":updateRole(req,res)\r\n                    break;    \r\n    }\r\n}\r\nconst updateRole=Authenticated(async(req,res)=>{\r\n        const id=req.body._id;\r\n        const role=req.body.role;\r\n        const newrole=role==\"user\"?\"admin\":\"user\"\r\n    const user=await User.findOneAndUpdate(\r\n        {_id:id},\r\n        {role:newrole},\r\n        {new:true}\r\n        )\r\n        res.status(200).json(user)\r\n})\r\nconst getUser=Authenticated(async(req,res)=>{\r\n    const user=await User.find({_id:{$ne:req.userid}})\r\n    res.status(200).json(user)\r\n})\r\n"]},"metadata":{},"sourceType":"module"}