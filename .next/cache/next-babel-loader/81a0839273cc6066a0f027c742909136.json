{"ast":null,"code":"import User from '../../models/User';\nimport Authenticated from '../../helper/Authenticated';\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      getUser(req, res);\n      break;\n\n    case \"PUT\":\n      updateRole(req, res);\n      break;\n  }\n});\nconst updateRole = Authenticated(async (req, res) => {\n  const id = req.body._id;\n  const role = req.body.role;\n  const newrole = role == \"user\" ? \"admin\" : \"user\";\n  const user = await User.findOneAndUpdate({\n    _id: id\n  }, {\n    role: newrole\n  }, {\n    new: true\n  });\n  res.status(200).json(user);\n});\nconst getUser = Authenticated(async (req, res) => {\n  //.select(\"-password\")\n  //jo user ki details hm la rhe h usme we dont want ki password bhi aa jay so we need to prevent it\n  const user = await User.find({\n    _id: {\n      $ne: req.userid\n    }\n  });\n  res.status(200).json(user);\n});","map":null,"metadata":{},"sourceType":"module"}