{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\ECommerce\\\\mystore\\\\pages\\\\cart.js\";\nimport baseURL from '../helper/baseURL';\nimport { parseCookies } from 'nookies';\nimport cookie from 'js-cookie';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport { JsonWebTokenError } from 'jsonwebtoken';\n\nconst cart = ({\n  error,\n  products\n}) => {\n  const {\n    token\n  } = parseCookies();\n  const {\n    0: newCart,\n    1: setCart\n  } = useState(products);\n\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-align\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please Login to view your cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 17\n    }, this);\n  }\n\n  const handleRemove = async pid => {\n    await fetch(`${baseURL}/api/cart`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      },\n      body: JSON.stringify({\n        productId: pid\n      })\n    });\n    const res2 = await res.json();\n    setCart(res2);\n  };\n\n  const CartItems = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: newCart.map(items => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"CartImages \",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: items.product.mediaURL\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"10px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [items.product.name, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Quantity : \", items.quantity, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Price : \", items.product.price, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              color: \"red\",\n              onClick: () => {\n                handleRemove(items.product._id);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 14\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }, this);\n  };\n\n  const router = useRouter();\n\n  if (error) {\n    M.toast({\n      html: error,\n      classes: \"red\"\n    });\n    cookie.remove(\"user\");\n    cookie.remove(\"token\");\n    router.push('/login');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(CartItems, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 36\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\nexport async function getServerSideProps(ctx) {\n  const {\n    token\n  } = parseCookies(ctx);\n\n  if (!token) {\n    return {\n      props: {\n        products: []\n      }\n    };\n  }\n\n  const res = await fetch(`${baseURL}/api/cart`, {\n    headers: {\n      \"Authorization\": token\n    }\n  });\n  const products = await res.json();\n  console.log(products);\n\n  if (products.error) {\n    return {\n      props: {\n        error: products.error\n      }\n    };\n  }\n\n  return {\n    props: {\n      products\n    }\n  };\n}\nexport default cart;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/ECommerce/mystore/pages/cart.js"],"names":["baseURL","parseCookies","cookie","useRouter","Link","useState","JsonWebTokenError","cart","error","products","token","newCart","setCart","handleRemove","pid","fetch","method","headers","body","JSON","stringify","productId","res2","res","json","CartItems","map","items","product","mediaURL","margin","name","quantity","price","_id","router","M","toast","html","classes","remove","push","getServerSideProps","ctx","props","console","log"],"mappings":"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","sourcesContent":["import baseURL from '../helper/baseURL';\r\nimport {parseCookies} from 'nookies';\r\nimport cookie from 'js-cookie'\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link' ;\r\nimport {useState} from 'react';\r\nimport { JsonWebTokenError } from 'jsonwebtoken';\r\n\r\nconst cart=({error,products})=>{\r\n    const {token}=parseCookies()\r\n    const [newCart,setCart]=useState(products)\r\n    if(!token){\r\n        return( <div className=\"center-align\">\r\n            <h3>Please Login to view your cart</h3>\r\n            <Link href='/login'><button className=\"btn\">Login</button></Link>\r\n        </div>)\r\n    }\r\n    const handleRemove=async(pid)=>{\r\n        await fetch(`${baseURL}/api/cart`,{\r\n            method:\"DELETE\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":token\r\n            },\r\n            body:JSON.stringify({\r\n                productId:pid\r\n            })\r\n        })\r\n        const res2=await res.json();\r\n        setCart(res2)\r\n    }\r\n   \r\n    \r\nconst CartItems=()=>{\r\n    return(\r\n    <div>\r\n        {newCart.map(items=>{\r\n            return(\r\n             <div className=\"CartImages \">\r\n            <img src={items.product.mediaURL}/>\r\n            <div style={{margin:\"10px\"}}>\r\n                <h3>{items.product.name} </h3>\r\n                <h4>Quantity : {items.quantity} </h4>\r\n                <h4>Price : {items.product.price} </h4>\r\n                <button className=\"btn\" color=\"red\" onClick={()=>{handleRemove(items.product._id)}}></button>\r\n            </div>\r\n            </div>\r\n            )\r\n            })\r\n        }\r\n    </div>\r\n    )}\r\n    const router=useRouter();\r\n    if(error){\r\n        M.toast({html:error,classes:\"red\"})\r\n        cookie.remove(\"user\");\r\n        cookie.remove(\"token\");\r\n        router.push('/login')\r\n    }\r\n    return (\r\n        <div className=\"container\"><CartItems/></div>\r\n    )       \r\n}\r\nexport async function getServerSideProps(ctx){\r\n    const{token}=parseCookies(ctx);\r\n    if(!token){\r\n        return {\r\n            props:{products:[]}\r\n        }\r\n    }\r\nconst res=await fetch(`${baseURL}/api/cart`,{\r\nheaders:{\r\n    \"Authorization\":token\r\n}\r\n})\r\nconst products=await res.json();\r\nconsole.log(products)\r\nif(products.error){\r\n    return {\r\n        props:{error:products.error}\r\n    }\r\n}\r\nreturn{\r\n    props:{products}\r\n}\r\n}\r\nexport default cart;"]},"metadata":{},"sourceType":"module"}