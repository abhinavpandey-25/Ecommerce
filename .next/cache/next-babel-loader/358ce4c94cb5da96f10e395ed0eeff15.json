{"ast":null,"code":"import initDb from '../../helper/initDb';\nimport User from '../../models/User';\nimport bcrypt from 'bcryptjs'; //for connectivity with the database\n\ninitDb();\nexport default (async (req, res) => {\n  console.log(\"aya\");\n  console.log(req.body);\n  const {\n    name,\n    email,\n    password\n  } = req.body;\n\n  try {\n    if (!name || !email || !password) {\n      return res.status(422).json({\n        error: \"Please add all fields\"\n      });\n    }\n\n    const user = await User.findOne({\n      email\n    });\n    console.log(user);\n\n    if (user) {\n      return res.status(422).json({\n        error: \"User already exists\"\n      });\n    }\n\n    const newps = bcrypt.hash(password, 12);\n    console.log(newps);\n    const nuser = new User({\n      name: name,\n      email: email,\n      password: newps\n    }).save();\n    res.status(201).json({\n      message: \"User SignedUp\"\n    });\n  } catch (e) {\n    console.log(e);\n  }\n});","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/ECommerce/mystore/pages/api/signup.js"],"names":["initDb","User","bcrypt","req","res","console","log","body","name","email","password","status","json","error","user","findOne","newps","hash","nuser","save","message","e"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,qBAAnB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;;AACAF,MAAM;AACN,gBAAe,OAAMG,GAAN,EAAUC,GAAV,KAAgB;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;AACJ,QAAM;AAACC,IAAAA,IAAD;AAAMC,IAAAA,KAAN;AAAYC,IAAAA;AAAZ,MAAsBP,GAAG,CAACI,IAAhC;;AACA,MAAG;AACC,QAAG,CAACC,IAAD,IAAO,CAACC,KAAR,IAAe,CAACC,QAAnB,EAA4B;AACxB,aAAON,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,KAAK,EAAC;AAAP,OAArB,CAAP;AACH;;AACD,UAAMC,IAAI,GAAC,MAAMb,IAAI,CAACc,OAAL,CAAa;AAACN,MAAAA;AAAD,KAAb,CAAjB;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAZ;;AACA,QAAGA,IAAH,EAAQ;AACN,aAAQV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,KAAK,EAAC;AAAP,OAArB,CAAR;AACD;;AACD,UAAMG,KAAK,GAACd,MAAM,CAACe,IAAP,CAAYP,QAAZ,EAAqB,EAArB,CAAZ;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAYU,KAAZ;AACA,UAAME,KAAK,GAAC,IAAIjB,IAAJ,CAAS;AACjBO,MAAAA,IAAI,EAACA,IADY;AAEjBC,MAAAA,KAAK,EAACA,KAFW;AAGjBC,MAAAA,QAAQ,EAACM;AAHQ,KAAT,EAILG,IAJK,EAAZ;AAKCf,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACQ,MAAAA,OAAO,EAAC;AAAT,KAArB;AACJ,GAjBD,CAkBA,OAAMC,CAAN,EAAQ;AACJhB,IAAAA,OAAO,CAACC,GAAR,CAAYe,CAAZ;AACH;AACA,CAzBD","sourcesContent":["import initDb from '../../helper/initDb'\r\nimport User from '../../models/User'\r\nimport bcrypt from 'bcryptjs'\r\n//for connectivity with the database\r\ninitDb();\r\nexport default async(req,res)=>{\r\n    console.log(\"aya\")\r\n    console.log(req.body);\r\nconst {name,email,password}=req.body;\r\ntry{ \r\n    if(!name||!email||!password){\r\n        return res.status(422).json({error:\"Please add all fields\"});\r\n    }\r\n    const user=await User.findOne({email});\r\n    console.log(user);\r\n    if(user){\r\n      return  res.status(422).json({error:\"User already exists\"})\r\n    }\r\n    const newps=bcrypt.hash(password,12);\r\n    console.log(newps);\r\n    const nuser=new User({\r\n        name:name,\r\n        email:email,\r\n        password:newps\r\n        }).save();\r\n     res.status(201).json({message:\"User SignedUp\"});   \r\n}\r\ncatch(e){\r\n    console.log(e);\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}