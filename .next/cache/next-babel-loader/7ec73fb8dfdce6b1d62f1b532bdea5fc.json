{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { model } from 'mongoose';\nimport { useRouter } from 'next/router';\nimport { useRef, useEffect, useState } from 'react';\nimport baseURL from '../../helper/baseURL';\nimport { parseCookies } from 'nookies';\n\nconst product = props => {\n  const {\n    0: quantity,\n    1: setQuantity\n  } = useState(1);\n  const router = useRouter();\n  const modalRef = useRef(null);\n  const cookies = parseCookies();\n  const user = cookies.user ? JSON.parse(cookies.user) : \"\";\n  useEffect(() => {\n    M.Modal.init(modalRef.current); //here modal agar triiger p work krana toh initialise karna padata h uske refrence se jo tiriger k bad display hoga\n  }, []);\n\n  if (router.isFallback) {\n    //agar use static props krte and and fallback true h then agar wo page already build nhi h toh server se fetch\n    //krenge jisme time lgta h toh tb tak ham loading a option dekha sakte h.\n    return /*#__PURE__*/_jsx(\"h1\", {\n      children: \"...Loading\"\n    });\n  } // console.log(props);\n\n\n  const getModal = () => {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      id: \"modal1\",\n      className: \"modal\",\n      ref: modalRef,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"Modal Header\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          children: \"Are u sure to delete this item\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxs(\"button\", {\n          onClick: () => deleteProduct(),\n          className: \"btn waves-effect waves-light  #d50000 red accent-4\",\n          style: {\n            margin: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsx(\"b\", {\n            children: \"Delete\"\n          }), \" \", /*#__PURE__*/_jsx(\"i\", {\n            className: \"material-icons\",\n            children: \"delete\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"button\", {\n          className: \"btn waves-effect waves-light #4a148c purple darken-4\",\n          style: {\n            margin: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsx(\"b\", {\n            children: \"Cancel\"\n          }), \" \", /*#__PURE__*/_jsx(\"i\", {\n            className: \"material-icons\",\n            children: \"cancel\"\n          })]\n        })]\n      })]\n    });\n  };\n\n  const deleteProduct = async () => {\n    console.log(\"del method\");\n    console.log(props.value._id);\n    fetch(`${baseURL}/api/product/${props.value._id}`, {\n      method: \"DELETE\"\n    }).then(res => res.json()).then(res2 => console.log(res2));\n    router.push('/');\n  };\n\n  const AddtoCart = async () => {\n    const res = await fetch(`${baseURL}/api/cart`, {\n      method: \"PUT\",\n      headers: {\n        'Content-Type': \"application/json\",\n        \"Authorization\": cookies.token\n      },\n      body: JSON.stringify({\n        quantity: quantity,\n        productId: props.value._id\n      })\n    });\n    const res2 = await res.json();\n    console.log(res2);\n    M.toast({\n      html: res2.message,\n      classes: \"green\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"container center-align \",\n    style: {\n      marginBottom: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsx(\"h2\", {\n      children: props.value.name\n    }), /*#__PURE__*/_jsx(\"img\", {\n      src: props.value.mediaURL,\n      style: {\n        \"width\": \"35%\",\n        \"height\": \"400px\"\n      }\n    }), /*#__PURE__*/_jsx(\"b\", {\n      children: /*#__PURE__*/_jsxs(\"p\", {\n        children: [\"RS \", props.value.price]\n      })\n    }), /*#__PURE__*/_jsx(\"input\", {\n      type: \"number\",\n      style: {\n        width: \"50%\",\n        textAlign: \"center\"\n      },\n      min: \"1\",\n      placeholder: \"Quantity\",\n      value: quantity,\n      onChange: e => setQuantity(Number(e.target.value))\n    }), user ? /*#__PURE__*/_jsxs(\"button\", {\n      className: \" btn waves-effect waves-light \",\n      onClick: () => AddtoCart(),\n      children: [\"Add \", /*#__PURE__*/_jsx(\"i\", {\n        className: \"material-icons\",\n        children: \"add\"\n      })]\n    }) : /*#__PURE__*/_jsx(\"button\", {\n      className: \" btn waves-effect waves-light \",\n      onClick: () => router.push('/login'),\n      children: \"Login to Add\"\n    }), /*#__PURE__*/_jsx(\"p\", {\n      children: props.value.description\n    }), user.role != \"user\" && /*#__PURE__*/_jsxs(\"button\", {\n      \"data-target\": \"modal1\",\n      className: \" btn modal-trigger waves-effect waves-light  #d50000 red accent-4 \",\n      children: [/*#__PURE__*/_jsx(\"b\", {\n        children: \"Delete\"\n      }), \" \", /*#__PURE__*/_jsx(\"i\", {\n        className: \"material-icons\",\n        children: \"delete\"\n      })]\n    }) //if the user is an admin then only u should give the delete button otherwise no need for delete button\n    , getModal()]\n  });\n};\n\nexport async function getServerSideProps(context) {\n  //since by using serverside props it can work fine but when the traffic is more it can decrease its performance\n  //since the page is static one so we can use getstatic props also for better performance.\n  //here in getserever side props context contains the params as obj and inside it id as another object {id:...}\n  const id = context.params.id;\n  const data = await fetch(`${baseURL}/api/product/${id}`).then(res => res.json()); // console.log(data);\n\n  return {\n    props: {\n      value: data\n    }\n  };\n} // export async function getStaticProps(context) {\n//    //since by using serverside props it can work fine but when the traffic is more it can decrease its performance\n//    //since the page is static one so we can use getstatic props also for better performance.\n//    const id= context.params.id;\n//    const data=await fetch(`${baseURL}/api/product/${id}`).then(res=>res.json());\n//    //console.log(data);\n//    return{\n//        props:{\n//            value:data\n//        }\n//    }\n// }       \n//first getstatic paths will run during build to build the sattic page with the givven id only\n//baki agar fallback false h toh other pages k liye pagenot found ayga but agar fall back true h toh jo id exist nhi krti at\n//build time then network request jese hoga on getstatic props\n// export async function getStaticPaths() {\n//     return {\n//       paths: [\n//         { params: { id:\"5f977b791efe90be048d25af\"} } \n//         //lets say we have a largee number of products then what should we doo hame har static path ko build time par hi build \n//         //kar sakte h\n//       ],\n//       fallback: true \n//     };\n//   }\n\nexport default product;","map":null,"metadata":{},"sourceType":"module"}