{"ast":null,"code":"import initDb from '../../helper/initDb';\nimport User from '../../models/User';\nimport bcrypt from 'bcryptjs';\nimport Cart from '../../models/Cart'; //for connectivity with the database\n\ninitDb();\nexport default (async (req, res) => {\n  console.log(\"aya\");\n  console.log(req.body);\n  const {\n    name,\n    email,\n    password\n  } = req.body;\n\n  try {\n    if (!name || !email || !password) {\n      return res.status(422).json({\n        error: \"Please add all fields\"\n      });\n    }\n\n    const user = await User.findOne({\n      email\n    });\n    console.log(user);\n\n    if (user) {\n      return res.status(422).json({\n        error: \"User already exists\"\n      });\n    }\n\n    const newps = await bcrypt.hash(password, 12);\n    console.log(newps);\n    const nuser = await new User({\n      name: name,\n      email: email,\n      password: newps\n    }).save();\n    await new Cart({\n      user: nuser._id\n    }).save(); //SO JAB hm naya user save kr rhe h toh usse associated ek cart bhi crreate kr rhe h jisme product will remain\n    //empty\n\n    res.status(201).json({\n      message: \"User SignedUp\"\n    });\n  } catch (e) {\n    console.log(e);\n  }\n});","map":null,"metadata":{},"sourceType":"module"}